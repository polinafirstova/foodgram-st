# Foodgram — Социальная сеть рецептов

Foodgram — это веб-приложение, позволяющее пользователям делиться своими любимыми рецептами, добавлять чужие рецепты в избранное, подписываться на публикации других авторов и создавать списки покупок.

## Особенности

*   **Регистрация и аутентификация:** пользователи могут создавать аккаунты с указанием имени, фамилии, никнейма, email и пароля, а также безопасно входить в систему. Аутентификация реализована с использованием токенов.
*   **Просмотр рецептов:** доступен просмотр рецептов на главной странице (с пагинацией), на странице пользователя и на странице подписок. Рецепты отсортированы по дате публикации (от новых к старым).
*   **Подписки:** зарегистрированные пользователи могут подписываться на других авторов и видеть их рецепты на странице «Мои подписки».
*   **Избранное:** зарегистрированные пользователи могут добавлять рецепты в избранное и просматривать свой список избранных рецептов.
*   **Список покупок:** зарегистрированные пользователи могут добавлять ингредиенты из рецептов в свой список покупок и скачивать его в формате .txt. Ингредиенты в списке суммируются.
*   **Создание и редактирование рецептов:** зарегистрированные пользователи могут создавать, редактировать и удалять свои рецепты.
*   **Страница пользователя:** отображает имя пользователя, список его рецептов и кнопку для подписки/отписки.
*   **API:** REST API, реализованный в соответствии со спецификацией.
*   **Админ-панель:** админ-панель Django для управления пользователями, рецептами, ингредиентами и другими моделями.
*   **Статические страницы:** «О проекте» и «Технологии».
*   **Изменение пароля и аватара:** зарегистрированные пользователи могут изменять свой пароль и аватар.

## Технологии

*   Python 3.12
*   Django 4.2
*   Django REST Framework
*   Gunicorn
*   PostgreSQL
*   Nginx
*   React
*   Docker
*   Docker Compose
*   GitHub Actions

## Архитектура проекта

Проект состоит из следующих контейнеров:

*   **db:** контейнер с СУБД PostgreSQL. Используется официальный образ `postgres:14`.
*   **backend:** контейнер с бэкендом (Django + Gunicorn). Образ `polinafirstova/foodgram-backend:latest` опубликован на [Docker Hub](https://hub.docker.com/).
*   **frontend:** контейнер с фронтендом (React). Образ `polinafirstova/foodgram-frontend:latest` опубликован на [Docker Hub](https://hub.docker.com/).
*   **nginx:** контейнер с веб-сервером Nginx. Используется официальный образ `nginx:1.25.4-alpine`.


## Запуск проекта

1.  **Склонируйте репозиторий:**

    ```bash
    git clone https://github.com/polinafirstova/foodgram-st.git
    ```

2. **Перейдите в директорию `backend`:**

    ```bash
    cd backend
    ```

3.  **Скопируйте файл `.env.example` и переименуйте его в `.env`:**

    ```bash
    cp .env.example .env
    ```
4.  **Заполните файл `.env` своими данными:**

    ```bash
    POSTGRES_DB=your_database_name
    POSTGRES_USER=your_database_user
    POSTGRES_PASSWORD=your_database_password
    SECRET_KEY=your_secret_key
    ```
    
    *   `SECRET_KEY` — cекретный ключ Django. Сгенерируйте случайную строку (например, с помощью `python -c "import secrets; print(secrets.token_hex())"`).
    *   `DATABASE_NAME` — имя базы данных PostgreSQL.
    *   `DATABASE_USER` — имя пользователя PostgreSQL.
    *   `DATABASE_PASSWORD` — пароль пользователя PostgreSQL.

5.  **Перейдите в директорию `infra`:**

    ```bash
    cd ../infra
    ```

6.  **Запустите проект с помощью Docker Compose:**

    ```bash
    docker-compose up -d
    ```

    Эта команда скачает образы `polinafirstova/foodgram-backend:latest` и `polinafirstova/foodgram-frontend:latest` с Docker Hub, а также образы `postgres:14` и `nginx:1.25.4-alpine`, и запустит все контейнеры. Убедитесь, что Docker Desktop запущен.

7.  **Дождитесь запуска всех контейнеров:**

    Это может занять несколько минут.

8.  **Откройте проект в браузере:**

    Перейдите по адресу `http://localhost/` в своем браузере.

## Дополнительные инструкции

*   **Суперпользователь:**
    *   Логин: `admin@admin.com`
    *   Пароль: `admin`
*   **Тестовые пользователи:**
    *   Пользователь 1:
        *   Email: `user1@user1.com`
        *   Пароль: `user1pass123`
    *   Пользователь 2:
        *   Email: `user2@user2.com`
        *   Пароль: `user2pass123`
    *   Пользователь 3:
        *   Email: `user3@user3.com`
        *   Пароль: `user3pass123`
*   **API:**
    *   Документация API доступна по адресу `http://localhost/api/docs/`.
*   **Админ-панель:**
    *   Админ-панель доступна по адресу `http://localhost/admin/`.
    *   Для модели пользователей доступен поиск по имени и email.
    *   Для модели рецептов включен поиск по названию и автору. На странице рецепта отображается количество добавлений в избранное.
    *   Для модели ингредиентов работает поиск по названию.
*   **Предзагруженные данные:**
    *   В базе данных уже загружены ингредиенты, пользователи и рецепты.

## CI/CD

Автоматическая сборка и публикация образов на Docker Hub настроены с помощью GitHub Actions. При каждом push в ветки `main` backend автоматически проверяется, собирается и публикуется на Docker Hub.

## Автор

Полина Фирстова